# MVP æœ¬åœ°æµ‹è¯•æŒ‡å—ï¼ˆæ— éœ€ Dockerï¼‰

## âš ï¸ Docker æ„å»ºé—®é¢˜

Docker æ„å»ºé‡åˆ°ç½‘ç»œé—®é¢˜ï¼ˆDebian é•œåƒæºï¼‰ã€‚æˆ‘ä»¬æ”¹ç”¨æœ¬åœ°ç¯å¢ƒæµ‹è¯•ï¼Œæ•ˆæœä¸€æ ·ï¼

## ğŸš€ æœ¬åœ°ç¯å¢ƒå¿«é€Ÿæµ‹è¯•

### æ–¹æ¡ˆ 1ï¼šç®€åŒ–æµ‹è¯•ï¼ˆæ¨èï¼Œ5 åˆ†é’Ÿï¼‰

ç›´æ¥æµ‹è¯•æ ¸å¿ƒ AI æ¨¡å—ï¼Œæ— éœ€æ•°æ®åº“ï¼š

```bash
# 1. å®‰è£…Pythonä¾èµ–
cd c:\Users\AIGCG\Desktop\RoSP\ai-sales-mvp\backend
pip install ollama langchain chromadb sentence-transformers pypdf python-docx

# 2. æµ‹è¯•Ollamaè¿æ¥
python
>>> import ollama
>>> client = ollama.Client(host="http://localhost:11434")
>>> response = client.generate(model="qwen2.5:7b", prompt="ä½ å¥½")
>>> print(response['response'])
>>> exit()

# 3. æ„å»ºçŸ¥è¯†åº“
cd scripts
python build_kb.py

# 4. æµ‹è¯•æ£€ç´¢
python build_kb.py --test
```

### æ–¹æ¡ˆ 2ï¼šå®Œæ•´æµ‹è¯•ï¼ˆéœ€è¦ PostgreSQLï¼‰

#### Step 1: å®‰è£… PostgreSQLï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
# ä¸‹è½½: https://www.postgresql.org/download/windows/
# æˆ–ä½¿ç”¨ä¾¿æºç‰ˆ: https://www.enterprisedb.com/downloads/postgres-postgresql-downloads

# åˆ›å»ºæ•°æ®åº“
psql -U postgres
CREATE DATABASE dji_sales_mvp;
\q
```

#### Step 2: é…ç½®ç¯å¢ƒå˜é‡

```bash
# backendç›®å½•åˆ›å»º.envæ–‡ä»¶
cd c:\Users\AIGCG\Desktop\RoSP\ai-sales-mvp\backend
copy .env.example .env

# ç¼–è¾‘.envï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥ï¼š
# DATABASE_URL=postgresql://postgres:ä½ çš„å¯†ç @localhost:5432/dji_sales_mvp
```

#### Step 3: å®‰è£…ä¾èµ–å¹¶è¿è¡Œ

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨FastAPI
python main.py
```

#### Step 4: æµ‹è¯• API

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯
cd c:\Users\AIGCG\Desktop\RoSP\ai-sales-mvp
python test_mvp.py
```

---

## ğŸ¯ å¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½ï¼ˆæ— éœ€æ•°æ®åº“ï¼‰

æˆ‘ä¸ºæ‚¨åˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹æµ‹è¯•è„šæœ¬ï¼Œå¯ä»¥ç›´æ¥éªŒè¯ AI æ¨¡å—ï¼š

```bash
cd c:\Users\AIGCG\Desktop\RoSP\ai-sales-mvp
python quick_test.py
```

è¿™ä¸ªè„šæœ¬ä¼šæµ‹è¯•ï¼š

- âœ… Ollama è¿æ¥
- âœ… å®¢æˆ·åˆ†ç±»ï¼ˆåŸºäºæ¨¡æ‹Ÿå¯¹è¯ï¼‰
- âœ… æ™ºèƒ½å¯¹è¯ï¼ˆæ— çŸ¥è¯†åº“ç‰ˆæœ¬ï¼‰
- âœ… è½¬äººå·¥åˆ¤æ–­

---

## ğŸ“‹ Docker é—®é¢˜è§£å†³æ–¹æ¡ˆï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨æƒ³ä¿®å¤ Docker é—®é¢˜ï¼š

### æ–¹æ³• 1ï¼šæ›´æ¢é•œåƒæº

```dockerfile
# backend/Dockerfile ä¿®æ”¹ä¸ºï¼š
FROM python:3.10-slim

# æ›´æ¢ä¸ºå›½å†…é•œåƒæº
RUN sed -i 's/deb.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list.d/debian.sources

WORKDIR /app
...
```

### æ–¹æ³• 2ï¼šä½¿ç”¨å·²æ„å»ºçš„é•œåƒ

```yaml
# docker-compose.yml ä¿®æ”¹backendéƒ¨åˆ†ï¼š
backend:
  image: python:3.10-slim # ç›´æ¥ä½¿ç”¨å®˜æ–¹é•œåƒ
  command: |
    sh -c "
    pip install -r requirements.txt &&
    uvicorn main:app --host 0.0.0.0 --port 8000 --reload
    "
  volumes:
    - ./backend:/app
```

---

## ğŸ’¡ æ¨èæµ‹è¯•æµç¨‹

**æœ€å¿«éªŒè¯æ–¹å¼**ï¼ˆ5 åˆ†é’Ÿï¼‰ï¼š

1. **åªæµ‹è¯• Ollama** âœ…

   ```bash
   ollama run qwen2.5:7b "ä½ æ˜¯ä¸€ä¸ªå¤§ç–†æ— äººæœºé”€å”®åŠ©ç†ï¼Œè¯·ä»‹ç»Matrice 30"
   ```

2. **æµ‹è¯•çŸ¥è¯†åº“æ„å»º** ï¼ˆå¦‚æœéœ€è¦ RAGï¼‰

   ```bash
   cd c:\Users\AIGCG\Desktop\RoSP\ai-sales-mvp\backend\scripts
   python build_kb.py
   python build_kb.py --test
   ```

3. **æµ‹è¯•å®Œæ•´ API**ï¼ˆéœ€è¦ PostgreSQLï¼‰
   - å®‰è£… PostgreSQL
   - é…ç½®.env
   - è¿è¡Œ `python main.py`
   - è¿è¡Œ `python test_mvp.py`

---

## ğŸ”§ å½“å‰çŠ¶æ€

- âœ… ä»£ç å·²å®Œæˆ
- âœ… Ollama å·²å®‰è£…ï¼ˆqwen2.5:7bï¼‰
- âš ï¸ Docker æš‚æ—¶æ— æ³•ä½¿ç”¨ï¼ˆç½‘ç»œé—®é¢˜ï¼‰
- ğŸ“ å»ºè®®ï¼šå…ˆç”¨æœ¬åœ°ç¯å¢ƒæµ‹è¯•

---

**ä¸‹ä¸€æ­¥é€‰æ‹©**ï¼š

1. **å¿«é€Ÿå¼€å§‹** - è¿è¡Œ `quick_test.py` æµ‹è¯•æ ¸å¿ƒ AI
2. **å®Œæ•´æµ‹è¯•** - å®‰è£… PostgreSQL åè¿è¡Œå®Œæ•´ç³»ç»Ÿ
3. **ä¿®å¤ Docker** - æ›´æ¢é•œåƒæºåé‡æ–°æ„å»º

**æ‚¨æƒ³é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆï¼Ÿ**
